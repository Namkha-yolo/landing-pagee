<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Namkha's Portfolio</title>
  <link rel="icon" type="image/png" sizes="32x32" href="cyber-favicon-green.png">
  <style>
    :root {
      --bg-color: #000;
      --text-color: #0f0;
      --hover-color: #fff;
      --cursor-color: #0f0;
      --accent-color: #0fa;
    }
    html, body {
      margin: 0; 
      padding: 0;
      width: 100%; 
      height: 100%;
      background: var(--bg-color); 
      color: var(--text-color);
      font-family: 'Courier New', Courier, monospace;
      overflow: hidden;
    }
    #terminal {
      box-sizing: border-box;
      padding: 12px;
      height: 100vh;
      overflow-y: auto;
      white-space: pre-wrap;
      line-height: 1.4;
      font-size: 1rem;
    }
    .prompt {
      display: flex; 
      align-items: center; 
      margin-top: 4px;
    }
    .prompt-user { 
      margin-right: 6px; 
      color: var(--accent-color);
    }
    .prompt-symbol { 
      margin-right: 6px; 
      color: #0af;
    }
    .prompt-input {
      flex: 1; 
      background: transparent; 
      border: none;
      color: var(--text-color); 
      font-family: inherit; 
      font-size: inherit;
      outline: none;
    }
    .cursor {
      width: 8px; 
      height: 1em; 
      background: var(--cursor-color);
      margin-left: 2px; 
      animation: blink 1s steps(2,start) infinite;
    }
    @keyframes blink {
      0%, 50% { opacity: 1; }
      51%, 100% { opacity: 0; }
    }
    a, a:visited {
      color: #0f0; 
      text-decoration: underline;
      transition: all 0.3s ease;
    }
    a:hover { 
      color: var(--hover-color); 
      text-decoration: none; 
      text-shadow: 0 0 5px rgba(0,255,0,0.7);
    }
    .highlight {
      color: var(--accent-color);
      font-weight: bold;
    }
    .error {
      color: #f00;
    }
    .directory {
      color: #0af;
    }
    .file {
      color: #0f0;
    }
    /* Responsive adjustments */
    @media (max-width: 600px) {
      #terminal {
        font-size: 0.8rem;
        padding: 8px;
      }
    }
  </style>
</head>
<body>
  <div id="terminal"></div>
  <script>
  (function(){
    const term = document.getElementById('terminal');
    let history = JSON.parse(localStorage.getItem('term_history') || '[]');
    let histIndex = history.length;
    let currentTheme = 'dark';

    // Comprehensive filesystem structure
    const fs = {
      '/': {
        type: 'directory',
        contents: ['resume.txt', 'projects', 'skills.txt', 'contact.txt', 'intro.txt', 'achievements.txt']
      },
      '/projects': {
        type: 'directory',
        contents: ['network_scanner.md', 'mini_siem.md', 'password_analyzer.md', 'waf.md', 'cybersec_tools.md']
      }
    };

    // Current working directory
    let cwd = '/';

    // Comprehensive content library (previously defined content remains the same)
    const content = {
      // ... (previous content remains unchanged)
      projects: `🔧 Available Projects 🔧

Project List:
1. network_scanner   - Network Vulnerability Scanner
2. mini_siem         - Security Information and Event Management
3. password_analyzer - Password Security Assessment Tool
4. waf               - Web Application Firewall
5. cybersec_tools    - Cybersecurity Research Tools

Use 'cat projects/[project_name].md' to view details
Or type 'projects [project_name]' for more information`
    };

    // Comprehensive command definitions
    const commands = {
      help: `Available Commands:
  help         – Show this help menu
  ascii        – Display ASCII banner
  ls           – List files/directories
  cd <dir>     – Change directory (.. to go up)
  cat <file>   – View file contents
  resume       – Quick resume overview
  about        – Personal introduction
  skills       – Technical skills summary
  contact      – Networking information
  projects     – List available projects
  achievements – Display academic achievements
  clear        – Clear terminal screen
  exit         – Close the terminal
  whoami       – Display current user info`,

      ascii: `
 ███╗   ██╗ █████╗ ███╗   ███╗██╗  ██╗██╗  ██╗ █████╗ 
 ████╗  ██║██╔══██╗████╗ ████║██║ ██╔╝██║  ██║██╔══██╗
 ██╔██╗ ██║███████║██╔████╔██║█████╔╝ ███████║███████║
 ██║╚██╗██║██╔══██║██║╚██╔╝██║██╔═██╗ ██╔══██║██╔══██║
 ██║ ╚████║██║  ██║██║ ╚═╝ ██║██║  ██╗██║  ██║██║  ██║
 ╚═╝  ╚═══╝╚═╝  ╚═╝╚═╝     ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝
     Cybersecurity | Ethical Hacking | Dev     
`
    };

    // Utility functions
    function saveHistory(cmd) {
      history.push(cmd);
      localStorage.setItem('term_history', JSON.stringify(history));
      histIndex = history.length;
    }

    function append(text='', className='') {
      const formattedText = text.replace(/\n/g,'<br/>');
      const lineElement = document.createElement('div');
      lineElement.innerHTML = formattedText;
      if (className) lineElement.className = className;
      term.appendChild(lineElement);
      term.scrollTop = term.scrollHeight;
    }

    function handle(cmd) {
      // Convert command to lowercase for case-insensitive matching
      cmd = cmd.toLowerCase().trim();

      // Split command into parts
      const [command, ...args] = cmd.split(' ');

      // Direct content commands
      const contentCommands = {
        'resume': content.resume,
        'skills': content.skills,
        'contact': content.contact,
        'about': content.intro,
        'achievements': content.achievements
      };

      if (contentCommands[command]) {
        append(contentCommands[command]);
        return;
      }

      // Projects command with detailed handling
      if (command === 'projects') {
        if (args.length === 0) {
          // List available projects
          append(content.projects);
          return;
        }

        // Specific project details
        const projectName = args[0];
        const projectDetails = content.projects[projectName];
        
        if (projectDetails) {
          append(projectDetails);
          return;
        }

        append(`Project "${projectName}" not found`, 'error');
        return;
      }

      // Specific command handling
      switch (command) {
        case 'clear':
          term.innerHTML = '';
          return;

        case 'exit':
          append('Goodbye! Closing terminal...', 'highlight');
          return;

        case 'whoami':
          append('namkha@portfolio', 'highlight');
          return;

        case 'ls':
          // Get the current directory's contents
          const currentDir = fs[cwd];
          if (currentDir && currentDir.contents) {
            // Create a formatted list with directories and files
            const formattedContents = currentDir.contents.map(item => {
              // Check if the item is a directory
              const isDir = fs[`/${item}`] && fs[`/${item}`].type === 'directory';
              return `<span class="${isDir ? 'directory' : 'file'}">${item}${isDir ? '/' : ''}</span>`;
            }).join('    ');
            append(formattedContents);
          } else {
            append('No contents found', 'error');
          }
          return;

        case 'cd':
          const dir = args[0];
          if (!dir) {
            append('cd: missing argument', 'error');
            return;
          }
          
          // Handle going up a directory
          if (dir === '..') {
            cwd = '/';
            append(`Changed directory to ${cwd}`, 'highlight');
            return;
          }

          // Check if the directory exists
          const fullPath = (cwd === '/' ? '/' : cwd + '/') + dir;
          if (fs[fullPath] && fs[fullPath].type === 'directory') {
            cwd = fullPath;
            append(`Changed directory to ${cwd}`, 'highlight');
          } else {
            append(`cd: no such file or directory: ${dir}`, 'error');
          }
          return;

        case 'cat':
          const filename = args[0];
          if (!filename) {
            append('cat: missing file operand', 'error');
            return;
          }

          // Handle different file types
          const fileContentMap = {
            'resume.txt': content.resume,
            'skills.txt': content.skills,
            'contact.txt': content.contact,
            'intro.txt': content.intro,
            'achievements.txt': content.achievements,
            'network_scanner.md': content.projects.network_scanner,
            'mini_siem.md': content.projects.mini_siem,
            'password_analyzer.md': content.projects.password_analyzer,
            'waf.md': content.projects.waf,
            'cybersec_tools.md': content.projects.cybersec_tools
          };

          const fileContent = fileContentMap[filename];
          if (fileContent) {
            append(fileContent);
          } else {
            append(`cat: ${filename}: No such file or directory`, 'error');
          }
          return;

        case 'help':
          append(commands.help);
          return;

        case 'ascii':
          append(commands.ascii);
          return;

        default:
          if (cmd.trim() !== '') {
            append(`bash: ${cmd}: command not found`, 'error');
          }
      }
    }

    function prompt() {
      const line = document.createElement('div');
      line.className='prompt';
      line.innerHTML =
        `<span class="prompt-user">namkha@portfolio:${cwd}$</span>`+
        `<span class="prompt-symbol">$</span>`+
        `<input class="prompt-input" autofocus />`+
        `<span class="cursor"></span>`;
      term.appendChild(line);

      const input = line.querySelector('input');
      input.addEventListener('keydown', e=>{
        if (e.key==='Enter') {
          const cmd = input.value.trim();
          input.disabled = true;
          line.querySelector('.cursor').remove();
          append(`namkha@portfolio:${cwd}$ ${cmd}`);
          saveHistory(cmd);
          handle(cmd.toLowerCase());
          prompt();
        }
        // history navigation
        if (e.key==='ArrowUp') {
          if (histIndex>0) histIndex--;
          input.value = history[histIndex]||'';
        }
        if (e.key==='ArrowDown') {
          if (histIndex<history.length-1) histIndex++;
          input.value = history[histIndex]||'';
        }
      });
      input.focus();
    }

    term.addEventListener('click', ()=> {
      const inp = term.querySelector('input.prompt-input:enabled');
      if (inp) inp.focus();
    });

    // Initial banner & prompt
    append(commands.ascii);
    append("Welcome! Type 'help' to explore my portfolio.", 'highlight');
    prompt();
  })();
  </script>
</body>
</html>
